import{i as u,r as t,u as S,x as N,j as s,s as w,A as L,S as P,y as _,h as i,z as B,B as F,o as U}from"./index-53703fb3.js";function V(){const c=u(o=>o.user.currentUser),n=u(o=>o.theme.currentTheme),l=u(o=>o.url.currentUrl),[e,j]=t.useState({}),[a,k]=t.useState({}),[b,T]=t.useState([]),[g,C]=t.useState(!0),d=S();let{username:p}=N();return t.useEffect(()=>{(async()=>{try{const r=setTimeout(async()=>{const v=await i.get(`/users/${p}`),y=await i.get(`/card/v1/${c._id}`),I=await i.get(`/icon/${c._id}`),$=await i.get(`/link/${n._id}`),[f,x,m,D]=await Promise.all([v,y,I,$]);d(B(f.data)),d(F(x.data)),d(U(D.data)),j(f.data),k(x.data),T(m.data),C(!1)},1e3);return()=>{clearTimeout(r)}}catch(r){console.error("Error fetching data:",r)}})()},[p,c._id,n==null?void 0:n._id]),s.jsx("section",{className:"profile",children:g?s.jsx(w,{isLoading:g,profileLoading:!0}):s.jsxs(s.Fragment,{children:[a!=null&&a.backgroundVideo||a!=null&&a.backgroundImg?s.jsx(s.Fragment,{children:a!=null&&a.backgroundVideo?s.jsx(s.Fragment,{children:s.jsx("video",{className:"profile-background",type:"video/webm",loop:!0,autoPlay:!0,src:a==null?void 0:a.backgroundVideo})}):s.jsx("img",{className:"profile-background",src:a==null?void 0:a.backgroundImg,alt:a==null?void 0:a.backgroundImg,loading:"lazy"})}):s.jsx(s.Fragment,{children:a!=null&&a.gadientColorBot||a!=null&&a.gadientColorTop?s.jsx(s.Fragment,{children:a!=null&&a.gadientColorBot&&(a!=null&&a.gadientColorTop)?s.jsx("div",{className:"profile-background",style:{backgroundImage:`linear-gradient(${a==null?void 0:a.gadientColorTop},${a==null?void 0:a.gadientColorBot})`}}):s.jsx("div",{className:"profile-background",style:{backgroundColor:`${(a==null?void 0:a.gadientColorTop)||(a==null?void 0:a.gadientColorBot)}`}})}):s.jsx("div",{className:"profile-background",style:{backgroundColor:`${a==null?void 0:a.bgColor}`}})}),s.jsxs("div",{className:"profile-info",children:[s.jsx(L,{username:e.username,usernameTitle:e.usernameTitle,decs:e.decs,avatar:e.avtImg,fontColor:a==null?void 0:a.font_color}),s.jsx(P,{icons:b}),l==null?void 0:l.map((o,r)=>s.jsx(_,{title:o.urlTitle,icon:o.urlThumbnail,link:o.url},r))]})]})})}export{V as default};
