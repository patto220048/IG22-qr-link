import{u,r as i,a as L,b as P,j as s,P as D,c as _,A as F,S as B,d as E,L as V,h as e,l as A,t as M,e as z}from"./index-532bbfa2.js";function R(){const o=u(t=>t.user.currentUser),c=u(t=>t.theme.currentTheme),l=u(t=>t.url.currentUrl),[r,j]=i.useState({}),[a,k]=i.useState({}),[m,v]=i.useState([]),[C,g]=i.useState(!1),[f,w]=i.useState(!0),d=L();let{username:p}=P();return i.useEffect(()=>{(async()=>{try{const n=await e.get(`/users/${p}`),I=await e.get(`/card/v1/${o==null?void 0:o._id}`),T=await e.get(`/icon/${o==null?void 0:o._id}`),S=await e.get(`/link/${o==null?void 0:o._id}`),[x,b,y,N]=await Promise.all([n,I,T,S]),$=setTimeout(async()=>{d(A(x.data)),d(M(b.data)),d(z(N.data)),j(x.data),k(b.data),v(y.data),w(!1)},500);return()=>{clearTimeout($)}}catch(n){console.error("Error fetching data:",n)}})()},[p,o==null?void 0:o._id,c==null?void 0:c._id]),s.jsxs("section",{className:"profile",children:[C&&s.jsx(D,{setIsContact:g,preview:!1,window:!0}),f?s.jsx(_,{isLoading:f,profileLoading:!0}):s.jsxs(s.Fragment,{children:[a!=null&&a.backgroundVideo||a!=null&&a.backgroundImg?s.jsx(s.Fragment,{children:a!=null&&a.backgroundVideo?s.jsx(s.Fragment,{children:s.jsx("video",{className:"profile-background",type:"video/webm",loop:!0,autoPlay:!0,src:a==null?void 0:a.backgroundVideo})}):s.jsx("img",{className:"profile-background",src:a==null?void 0:a.backgroundImg,alt:a==null?void 0:a.backgroundImg,loading:"lazy"})}):s.jsx(s.Fragment,{children:a!=null&&a.gadientColorBot||a!=null&&a.gadientColorTop?s.jsx(s.Fragment,{children:a!=null&&a.gadientColorBot&&(a!=null&&a.gadientColorTop)?s.jsx("div",{className:"profile-background",style:{backgroundImage:`linear-gradient(${a==null?void 0:a.gadientColorTop},${a==null?void 0:a.gadientColorBot})`}}):s.jsx("div",{className:"profile-background",style:{backgroundColor:`${(a==null?void 0:a.gadientColorTop)||(a==null?void 0:a.gadientColorBot)}`}})}):s.jsx("div",{className:"profile-background",style:{backgroundColor:`${a==null?void 0:a.bgColor}`}})}),s.jsxs("div",{className:"profile-info",children:[s.jsx(F,{username:r.username,usernameTitle:r.usernameTitle,decs:r.decs,avatar:r.avtImg,fontColor:a==null?void 0:a.font_color}),s.jsxs("div",{className:"profile-info-items",children:[s.jsx(B,{icons:m}),l==null?void 0:l.map((t,n)=>s.jsx(E,{preview:!1,window:!0,isMobile:!0,setIsContact:g,title:t.urlTitle,icon:t.urlThumbnail,link:t.url,acticve:t.acticve,thumbnailImage:t.thumbnailImage},n))]}),s.jsx(V,{to:"/",children:s.jsx("button",{className:"profile-btn-connect",children:"Make your link now?"})})]})]})]})}export{R as default};
