import{u,r,a as P,b as D,j as s,P as L,c as _,A as F,S as B,d as E,h as c,l as V,t as A,e as z}from"./index-5c23b623.js";function O(){const t=u(o=>o.user.currentUser),i=u(o=>o.theme.currentTheme),l=u(o=>o.url.currentUrl),[e,j]=r.useState({}),[a,k]=r.useState({}),[v,C]=r.useState([]),[w,g]=r.useState(!1),[f,I]=r.useState(!0),d=P();let{username:p}=D();return r.useEffect(()=>{(async()=>{try{const n=await c.get(`/users/${p}`),m=await c.get(`/card/v1/${t==null?void 0:t._id}`),S=await c.get(`/icon/${t==null?void 0:t._id}`),T=await c.get(`/link/${i==null?void 0:i._id}`),[x,b,y,$]=await Promise.all([n,m,S,T]),N=setTimeout(async()=>{d(V(x.data)),d(A(b.data)),d(z($.data)),j(x.data),k(b.data),C(y.data),I(!1)},500);return()=>{clearTimeout(N)}}catch(n){console.error("Error fetching data:",n)}})()},[p,t==null?void 0:t._id,i==null?void 0:i._id]),s.jsxs("section",{className:"profile",children:[w&&s.jsx(L,{setIsContact:g,preview:!1,window:!0}),f?s.jsx(_,{isLoading:f,profileLoading:!0}):s.jsxs(s.Fragment,{children:[a!=null&&a.backgroundVideo||a!=null&&a.backgroundImg?s.jsx(s.Fragment,{children:a!=null&&a.backgroundVideo?s.jsx(s.Fragment,{children:s.jsx("video",{className:"profile-background",type:"video/webm",loop:!0,autoPlay:!0,src:a==null?void 0:a.backgroundVideo})}):s.jsx("img",{className:"profile-background",src:a==null?void 0:a.backgroundImg,alt:a==null?void 0:a.backgroundImg,loading:"lazy"})}):s.jsx(s.Fragment,{children:a!=null&&a.gadientColorBot||a!=null&&a.gadientColorTop?s.jsx(s.Fragment,{children:a!=null&&a.gadientColorBot&&(a!=null&&a.gadientColorTop)?s.jsx("div",{className:"profile-background",style:{backgroundImage:`linear-gradient(${a==null?void 0:a.gadientColorTop},${a==null?void 0:a.gadientColorBot})`}}):s.jsx("div",{className:"profile-background",style:{backgroundColor:`${(a==null?void 0:a.gadientColorTop)||(a==null?void 0:a.gadientColorBot)}`}})}):s.jsx("div",{className:"profile-background",style:{backgroundColor:`${a==null?void 0:a.bgColor}`}})}),s.jsxs("div",{className:"profile-info",children:[s.jsx(F,{username:e.username,usernameTitle:e.usernameTitle,decs:e.decs,avatar:e.avtImg,fontColor:a==null?void 0:a.font_color}),s.jsxs("div",{className:"profile-info-items",children:[s.jsx(B,{icons:v}),l==null?void 0:l.map((o,n)=>s.jsx(E,{preview:!1,window:!0,isMobile:!0,setIsContact:g,title:o.urlTitle,icon:o.urlThumbnail,link:o.url,acticve:o.acticve,thumbnailImage:o.thumbnailImage},n))]})]})]})]})}export{O as default};
